<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    
    <!--<link rel="stylesheet" type="text/css" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">-->
    <!--<link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.css">-->
    
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.min.css"/>

    <link rel="stylesheet" type="text/css" href="../css/main.css">   
    
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dc/2.1.8/dc.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/queue-async/1.0.7/queue.min.js"></script>
    
    
</head>
<body>
<!--*************************************************************************-->

<section>
    <div class="container md-col-12">
        <div class="row" style="padding: 40px">
            <h1>Dashboard project</h1>
        </div>
    </div>
</section>

<!--*************************************************************************-->
<section>
    <div class="container-fluid">
    
        <div class="col-lg-12">
            
            <div class="col-lg-offset-2 col-lg-3" style="padding: 20px">
                <!--<h4>Song List</h4>-->
                <h6>List of Songs</h6>
                <div id="per-song-count"></div>
            </div>
            
        </div>

    </div>
</section>
<!--*************************************************************************-->

<script>
    
// -----------------------------------------------------------------------------
  
queue()
    .defer(d3.json, "../bob_dylan_songs.json")
    .await(makeGraphs);

function makeGraphs(error, songs) {

    var ndx = crossfilter(songs);      
    
    var parseDate = d3.time.format("%mmm /%dd, /%yyyy").parse;
    songs.forEach(function(d){
        d.first_date = parseDate(d.first_date);
        console.log(d.first_date)
    });    
    

    var count_album_dim = ndx.dimension(dc.pluck('album'));
    var count_numplays_measure = count_album_dim.group().reduceSum(dc.pluck('num_plays'));    
    
    dc.rowChart("#per-song-count")
        .width(900)
        .height(1000)
        .margins({top: 30, right: 50, bottom: 40, left: 40})
        .x(d3.scale.linear().domain([6,20]))
        .elasticX(true)
        .cap(10)
        .othersGrouper(false)
        
        
        .dimension(count_album_dim)
        .group(count_numplays_measure)
        
        .render();
        
        // .width(900)
        // .height(500)
        // .margins({top: 30, right: 50, bottom: 40, left: 40})
        // .dimension(count_album_dim)
        // .group(count_numplays_measure)
        // .transitionDuration(500)
        
        // .x(d3.scale.ordinal())
        // .xUnits(dc.units.ordinal)
        
        // .xAxisLabel("Song")
        // .yAxisLabel("Number")
        // .yAxis().ticks(20);
        
    // dc.renderAll();    
}

// -----------------------------------------------------------------------------






</script>
<!--*************************************************************************-->

<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>-->

<!--<script type="text/javascript" src="bower_components/jquery/dist/jquery.js"></script>-->
<!--<script type="text/javascript" src="bower_components/bootstrap/dist/js/bootstrap.js"></script>-->
    
</body>
</html>